// BIND9 Authoritative Server Configuration
// For NSEC Cache Datastore Demo

options {
    directory "/var/cache/bind";
    
    // Listen on all interfaces
    listen-on { any; };
    listen-on-v6 { none; };
    
    // Allow queries from anywhere (demo only)
    allow-query { any; };
    
    // Authoritative only - no recursion
    recursion no;
    
    // DNSSEC settings
    dnssec-validation no;  // We're authoritative, not validating
    
    // Minimal responses for cleaner debugging
    minimal-responses yes;
    
    // Version hiding
    version "nsec-auth-demo";
    
    // PID file
    pid-file "/var/run/named/named.pid";
};

// Query logging for proof of cache behavior
logging {
    channel querylog {
        file "/var/log/named/query.log" versions 3 size 10m;
        severity info;
        print-time yes;
        print-category yes;
        print-severity yes;
    };
    
    channel default_log {
        file "/var/log/named/named.log" versions 3 size 10m;
        severity info;
        print-time yes;
        print-category yes;
        print-severity yes;
    };
    
    category queries { querylog; };
    category default { default_log; };
    category general { default_log; };
    category security { default_log; };
    category dnssec { default_log; };
};

// The demo zone - signed with NSEC
zone "zone.test" {
    type primary;
    file "/var/cache/bind/zones/zone.test.signed";
    allow-query { any; };
    allow-transfer { none; };
};
